<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>امتحان الحاسب الآلي - تدريب</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --correct-color: #27ae60;
            --wrong-color: #c0392b;
            --bg-color: #f4f6f7;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1 { margin: 0; color: var(--primary-color); }
        h2 { color: var(--accent-color); font-size: 1.2rem; margin-top: 10px; }

        .exam-section {
            display: none; /* Hidden by default until selected */
        }
        
        .exam-section.active {
            display: block;
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .nav-btn {
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
        }

        .nav-btn:hover { background: #34495e; }

        .question-card {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            border-right: 5px solid var(--accent-color);
        }

        .section-image {
            width: 100%;
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            margin-bottom: 15px;
            border: 1px solid #ddd;
        }

        .question-text {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 15px;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
        }

        .option-btn {
            padding: 12px;
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            text-align: right;
            transition: all 0.2s;
            font-size: 1rem;
        }

        .option-btn:hover {
            background: #e2e6ea;
        }

        /* Feedback Styles */
        .option-btn.correct {
            background-color: #d4edda;
            border-color: var(--correct-color);
            color: var(--correct-color);
        }

        .option-btn.wrong {
            background-color: #f8d7da;
            border-color: var(--wrong-color);
            color: var(--wrong-color);
        }

        .explanation-box {
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f4fd;
            border-radius: 8px;
            border-right: 4px solid var(--accent-color);
            display: none; /* Hidden by default */
            font-size: 0.95rem;
        }

        .toggle-explain-btn {
            background: none;
            border: none;
            color: var(--accent-color);
            text-decoration: underline;
            cursor: pointer;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .finish-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: var(--correct-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.2rem;
            cursor: pointer;
            margin-top: 30px;
        }

        .score-modal {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .score-content {
            background: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            max-width: 400px;
            width: 90%;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 20px 0;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>بنك أسئلة الحاسب الآلي</h1>
        <h2>اختر الامتحان للبدء</h2>
    </header>

    <div class="nav-buttons">
        <button class="nav-btn" onclick="showExam('exam2024')">امتحان 2023/2024</button>
        <button class="nav-btn" onclick="showExam('exam2023')">امتحان 2023 (قريباً)</button>
        <button class="nav-btn" onclick="showExam('exam2022')">امتحان 2022 (قريباً)</button>
    </div>

    <div id="exam2024" class="exam-section active">
        </div>

    <div id="exam2023" class="exam-section">
        <p style="text-align: center;">سيتم إضافة الأسئلة قريباً...</p>
    </div>
    <div id="exam2022" class="exam-section">
        <p style="text-align: center;">سيتم إضافة الأسئلة قريباً...</p>
    </div>

    <button id="finishBtn" class="finish-btn" onclick="calculateScore()">إنهاء الامتحان وعرض النتيجة</button>
</div>

<div id="scoreModal" class="score-modal">
    <div class="score-content">
        <h2>نتيجتك</h2>
        <div class="score-number" id="finalScore">0 / 0</div>
        <p id="scoreMessage"></p>
        <button class="nav-btn" onclick="closeModal()">مراجعة الإجابات</button>
    </div>
</div>

<script>
    // --- Data: Exam Questions ---
    const examData2024 = [
        // --- Section 1: Word Ribbon (Requires Image 1) ---
        {
            id: 71,
            sectionImage: "img1.jpg", // ضع صورة شريط الأدوات بهذا الاسم
            question: "71- يمكن إدراج معادلات رياضية عند الضغط على أيقونة السهم رقم:",
            options: ["16", "12", "13", "11"],
            correct: 3, // Index 3 = "11"
            explanation: "الإجابة الصحيحة: d) 11 (تشير إلى أيقونة Equation)"
        },
        { id: 72, question: "72- يمكن إدراج موقع على الانترنت (Hyperlink) عند الضغط على أيقونة السهم رقم:", options: ["16", "12", "13", "15"], correct: 1, explanation: "الإجابة الصحيحة: b) 12" },
        { id: 73, question: "73- يمكن إدراج أرقام الصفحات عند الضغط على أيقونة السهم رقم:", options: ["16", "14", "13", "15"], correct: 2, explanation: "الإجابة الصحيحة: c) 13" },
        { id: 74, question: "74- يمكن إدراج رسم بياني (Chart) عند الضغط على أيقونة السهم رقم:", options: ["19", "17", "18", "15"], correct: 2, explanation: "الإجابة الصحيحة: c) 18" },
        { id: 75, question: "75- يمكن إدراج الرموز (Symbols) عند الضغط على أيقونة السهم رقم:", options: ["16", "7", "19", "15"], correct: 2, explanation: "الإجابة الصحيحة: c) 19" },
        { id: 76, question: "76- يمكن إدراج أغلفة للتقارير (Cover Page) عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "8", "15"], correct: 0, explanation: "الإجابة الصحيحة: a) 6" },
        { id: 77, question: "77- يمكن إدراج جدول مكون من 3 أعمدة و 4 صفوف عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "3", "15"], correct: 1, explanation: "الإجابة الصحيحة: b) 7" },
        { id: 78, question: "78- يمكن إدراج صورة عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "8", "15"], correct: 2, explanation: "الإجابة الصحيحة: c) 8" },
        { id: 79, question: "79- يمكن إدراج فواصل بين الصفحات (Page Break) عند الضغط على أيقونة السهم رقم:", options: ["6", "3", "8", "15"], correct: 1, explanation: "الإجابة الصحيحة: b) 3" },
        { id: 81, question: "81- يمكن إدراج عمود يمكن الكتابة فيه (Text Box) عند الضغط على أيقونة السهم رقم:", options: ["16", "18", "15", "17"], correct: 2, explanation: "الإجابة الصحيحة: c) 15" },
        { id: 82, question: "82- يمكن كتابة عنوان في الهامش العلوي لكل الصفحات (Header) عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "12", "14"], correct: 3, explanation: "الإجابة الصحيحة: d) 14" },
        { id: 83, question: "83- يمكن إدراج الوقت والتاريخ عند الضغط على أيقونة السهم رقم:", options: ["12", "17", "13", "14"], correct: 1, explanation: "الإجابة الصحيحة: b) 17" },
        { id: 84, question: "84- يمكن كتابة عنوان في الهامش السفلي لكل الصفحات (Footer) عند الضغط على أيقونة السهم رقم:", options: ["16", "17", "18", "14"], correct: 0, explanation: "الإجابة الصحيحة: a) 16" },
        { id: 85, question: "85- يمكن إدراج مربع أو دائرة (Shapes) عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "8", "5"], correct: 2, explanation: "الإجابة الصحيحة: c) 8 (أو حسب الأيقونة الظاهرة للأشكال)" },

        // --- Section 2: Outlook (Requires Image 2) ---
        {
            id: 86,
            sectionImage: "img2.jpg", // ضع صورة Outlook بهذا الاسم
            question: "86- عدد الرسائل الواردة (Inbox) في الشكل التالي:",
            options: ["5210", "3210", "2416", "116"],
            correct: 2,
            explanation: "الإجابة الصحيحة: c) 2416"
        },
        { id: 87, question: "87- عدد الرسائل التي تم مسحها (Deleted Items) في الشكل التالي:", options: ["5210", "44", "17", "84"], correct: 1, explanation: "الإجابة الصحيحة: b) 44" },
        { id: 88, question: "88- عدد الرسائل التي تم إرسالها (Sent Items) في الشكل التالي:", options: ["5210", "188", "17", "84"], correct: 1, explanation: "الإجابة الصحيحة: b) 188" },

        // --- Section 3: General & Excel ---
        { id: 89, question: "89- عند الضغط على CTRL + C لملف ورد:", options: ["يتم قص الملف", "يتم نسخ الملف", "يتم فتح ملف جديد", "يتم عمل غلاف للمستند"], correct: 1, explanation: "الإجابة الصحيحة: ب) يتم نسخ الملف" },
        { id: 90, question: "90- يستخدم شريط الصيغة في برنامج الأكسيل في:", options: ["يتم تحديد المستند", "تظهر عنوان الخلية", "كتابة المعادلات أو الدوال", "يتم فتح ملف جديد"], correct: 2, explanation: "الإجابة الصحيحة: ج) كتابة المعادلات أو الدوال" },
        { id: 91, question: "91- عند الضغط على Wrap text في برنامج الأكسيل يمكن:", options: ["أدراج صورة", "الكتابه في الخلية الواحده اكثر من سطر", "كلمة واحدة", "أدراج جدول"], correct: 1, explanation: "الإجابة الصحيحة: ب) الكتابه في الخلية الواحده اكثر من سطر" },
        { id: 92, question: "92- عند الضغط على أيقونة WordArt يمكن أدراج:", options: ["جدول", "فواصل بين الصفحات", "غلاف للمستند", "خطوط ملونة زاهية"], correct: 3, explanation: "الإجابة الصحيحة: د) خطوط ملونة زاهية" },
        { id: 93, question: "93- يعتبر برنامج مايكروسوفت باوربوينت من البرامج البسيطة والفعالة في:", options: ["أعداد العروض التفاعلية", "لتجميل الملف", "لتنسيق كتب", "رسم جداول"], correct: 0, explanation: "الإجابة الصحيحة: أ) أعداد العروض التفاعلية" },

        // --- Section 4: Page Layout (Requires Image 3) ---
        {
            id: 94,
            sectionImage: "img3.jpg", // صورة Page Layout
            question: "94- يمكن ادراج علامة مائية عند الضغط على أيقونة السهم رقم:",
            options: ["6", "7", "8", "5"],
            correct: 0,
            explanation: "الإجابة الصحيحة: a) 6 (Watermark)"
        },
        { id: 95, question: "95- يمكن أدراج المسافات بين الأسطر (Spacing) عند الضغط على أيقونة السهم رقم:", options: ["6", "2", "8", "5"], correct: 1, explanation: "الإجابة الصحيحة: b) 2" },
        { id: 96, question: "96- يمكن تغيير لون الورقة (Page Color) عند الضغط على أيقونة السهم رقم:", options: ["6", "3", "7", "5"], correct: 2, explanation: "الإجابة الصحيحة: c) 7" },
        { id: 97, question: "97- يمكن تغيير الهوامش (Margins) عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "8", "3"], correct: 3, explanation: "الإجابة الصحيحة: d) 3" },
        { id: 98, question: "98- يمكن تغيير حجم الورقة (Size) عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "4", "5"], correct: 2, explanation: "الإجابة الصحيحة: c) 4 (Size)" },
        { id: 99, question: "99- يمكن أدراج عدد الأسطر (Line Numbers) عند الضغط على أيقونة السهم رقم:", options: ["6", "7", "8", "5"], correct: 3, explanation: "الإجابة الصحيحة: d) 5" },
        { id: 100, question: "100- مايكروسوفت إكسل هو برنامج متخصص يستخدم في:", options: ["أنشاء الجداول الحسابية", "عمل الحسابات", "رسم المخططات البيانية", "كل ما سبق"], correct: 3, explanation: "الإجابة الصحيحة: د) كل ما سبق" },

        // --- Section 5: Excel Functions (Requires Image 4) ---
        {
            id: 101,
            sectionImage: "img4.jpg", // صورة Excel Formula Bar
            question: "101- السهم رقم 1 يشير الى:",
            options: ["الخانة الخاصة بكتابة المعادلة", "عنوان الخلية", "نوع المعادلة", "أدراج أو أزاله صف"],
            correct: 0,
            explanation: "الإجابة الصحيحة: أ) الخانة الخاصة بكتابة المعادلة"
        },
        { id: 102, question: "102- السهم رقم 2 يشير الى:", options: ["الخانة الخاصة بكتابة المعادلة", "عنوان الخلية (Name Box)", "نوع المعادلة", "أدراج أو أزاله صف"], correct: 1, explanation: "الإجابة الصحيحة: ب) عنوان الخلية" },
        { id: 103, question: "103- أي من المعادلات التالية تمثل دالة COUNTIF الصحيحة؟", options: [')=COUNTIF(SBS2:SBS21,">0")', '=COUNTIF($B$2:$B$21,">0")', '=COUNTIF($B$2:$B$21">0")', '=COUNTIF($B$2:$B$21, >0)'], correct: 1, explanation: "الإجابة الصحيحة: b" },
        { id: 104, question: "104- أي من المعادلات التالية تمثل دالة LARGE الصحيحة؟", options: ['=LARG ($B$2:$B$20,4)', '=LARGE$B$2:$B$20,4)X', '=LARGE($B$2:$B$20,4)', 'LARGE($B$2:$B$20,4)'], correct: 2, explanation: "الإجابة الصحيحة: c" },
        { id: 105, question: "105- أي من المعادلات التالية تمثل دالة COUNTBLANK الصحيحة؟", options: ['=COUNTBLANK(D2:D21)', 'COUNTBLANK(D2:D21)', '=COUNTBLANK(D2D21)/', '=COUNTBLANK(D2:D21 X'], correct: 0, explanation: "الإجابة الصحيحة: a" },
        { id: 106, question: "106- أي من المعادلات التالية تمثل دالة SMALL الصحيحة؟", options: ['=SMAL ($B$2:$B$21,3)', 'SMALL($B$2:$B$21,3)', '=SMALL($B$2:$B$21,3)', '=SMALL( B$2:$B$21,3)'], correct: 2, explanation: "الإجابة الصحيحة: c" },
        { id: 107, question: "107- في المعادلة IF(B2>=90... الطالب الحاصل على 52 درجة:", options: ["A+", "B+", "C+", "F"], correct: 2, explanation: "الإجابة الصحيحة: c) C+ (لأن 52 أكبر من 50 وأقل من 80)" },
        { id: 108, question: "108- في المعادلة السابقة الطالب الحاصل على 90 درجة:", options: ["A+", "B+", "C+", "F"], correct: 0, explanation: "الإجابة الصحيحة: a) A+" },

        // --- Section 6: True/False ---
        { id: 109, question: "من أهم برمجيات انظمه التشغيل ويندوز او اندرويد و Microsoft office.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - الأوفيس برامج تطبيقية وليس نظام تشغيل" },
        { id: 110, question: "يمكن استخدام جهاز الحاسب الآلي بدون تحميل برمجيات أنظمة التشغيل.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ" },
        { id: 111, question: "البرنامج هو مجموعة مرتبة من التعليمات مكتوبة بأحد لغات البرمجة.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 112, question: "End User هو الشخص المستخدم النهائي للحاسب.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 113, question: "Network هي مجموعة من الحواسيب المرتبطة مع بعضها والتي لا يمكن مشاركة البيانات...", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - الشبكة تسمح بالمشاركة" },
        { id: 114, question: "Internet هي أكبر شبكة للحاسبات في العالم، للتواصل مع ملايين المستخدمين.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 115, question: "Algorithm سميت الخوارزمية بهذا الاسم نسبة إلى البلد الذي نشأت فيه.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - نسبة للعالم الخوارزمي" },
        { id: 116, question: "يستخدم حساس درجة الحرارة في التكييف في المهمة الأولى من معالجة الكمبيوتر للمعلومات (الإدخال).", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 117, question: "المعالجة Data processing هي عملية تحويل درجة الحرارة المقاسة الى صورة رقمية.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 118, question: "Motherboard هو الجزء الرئيسي التي يتم توصيل فيها جميع القطع الأخرى بالكمبيوتر.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 119, question: "Processor يحتوي علي وحدة تحكم فقط.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - يحتوي على وحدة الحساب والمنطق أيضاً" },
        { id: 120, question: "وحدة التحكم في المعالج يمكن من خلالها اصدار الأوامر في جميع اقسام الحاسب.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 121, question: "يستخدم القرص الصلب في تخزين المعلومات والبيانات بصورة مؤقتة لا دائمه.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - تخزين دائم" },
        { id: 122, question: "تم اختراع الحاسب الآلي في القرن الثامن عشر.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ" },
        { id: 123, question: "الجيل الثاني للكمبيوتر كان عام 1965.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ" },
        { id: 124, question: "يعتبر الحاسب الآلي المحمول (Laptop) الكمبيوتر الاكثر استخداما في العالم.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 125, question: "الحاسب الآلي اللوحي يستخدم نظام تشغيل ويندوز او نظام تشغيل الاندرويد.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 126, question: "يستخدم السيرفر في تشغيل عدد كبير من الحاسبات الشخصية والتنسيق فيما بينهم.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 127, question: "تتم معالجة الكمبيوتر للمعلومات على ثلاث خطوات (إدخال - معالجة - إخراج).", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 128, question: "تتم المهمة الثانية لمعالجة المعلومات في القرص الصلب Hard Disk.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - في المعالج Processor" },
        { id: 129, question: "Data هي المعلومات والبيانات التي يتم أدخالها للحاسب الألي تمهيداً لبدء المعالجة.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 130, question: "Data output هي عملية الاحتفاظ بالبيانات في الذاكرة الخاصة بالكمبيوتر.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - هذا تعريف التخزين" },
        { id: 131, question: "يفقد الرام (RAM) جميع المعلومات الموجودة داخلها عند عمل ريستارت.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 132, question: "يستخدم برنامج Microsoft teams في انشاء فصل تفاعلي.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 133, question: "جهاز كمبيوتر PC هو أكثر عملية لأنه تم دمج الأجزاء الكبيرة في أجزاء صغيرة يمكن حملها.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - هذا تعريف اللابتوب" },
        { id: 134, question: "عند توقف السيرفر الخاص بشركة جوجل فلن تتوقف خدمة الأنترنت في مصر.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ" },
        { id: 135, question: "الروم ROM تفقد المعلومات المخزنة داخلها عند عمل ريستارت.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - لا تفقد البيانات" },
        { id: 136, question: "يتكون السيرفر من أجهزه كمبيوتر ذات سعة تخزينية منخفضة.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - سعة عالية" },
        { id: 137, question: "تعتبر شاشة الموبايل والتاب Touch screen من وحدات الأخراج فقط.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - إدخال وإخراج" },
        { id: 138, question: "يعتبر تصميم برنامج لتصنيف الطلاب الي راسب وناجح خوارزمية.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 139, question: "يختص (Outlook) بالإيميل الخاص بالطالب.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 140, question: "يستخدم (One Drive) في عمل محاضرة تفاعلية مع الطلبة.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - للتخزين" },
        { id: 141, question: "يمكن ارسال رساله بريد الكتروني بالضغط على أيقونة Inbox.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - Inbox للوارد" },
        { id: 142, question: "عند النقر فوق CTRL + A يمكن تحديد أول سطر من المستند في برنامج word.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - تحديد الكل" },
        { id: 143, question: "Junk Emails يجب مسحها والتخلص منها نهائيا.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 144, question: "لا يوجد فرق بين الضغط علي Save و Save as في برنامج Word.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ" },
        { id: 145, question: "كلما قمت بنسخ أي شيء في MS Word، يتم إرساله تلقائيا إلى الحافظة Clipboard.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
        { id: 146, question: "يستخدم الرمز CTRL + X في نسخ Copy.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ - للقص" },
        { id: 147, question: "تستخدم قائمة Find and replace في البحث عن وظيفة.", options: ["صح", "خطأ"], correct: 1, explanation: "خطأ" },
        { id: 148, question: "Save يحفظ تغيرات في الملف الحالي بنفس الاسم والمكان.", options: ["صح", "خطأ"], correct: 0, explanation: "صح" },
    ];

    let currentScore = 0;
    let answeredQuestions = new Set();

    function initExam() {
        const container = document.getElementById('exam2024');
        container.innerHTML = '';
        
        examData2024.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            
            // إضافة الصورة إذا وجدت
            let imageHTML = '';
            if(q.sectionImage) {
                imageHTML = `<img src="${q.sectionImage}" alt="شكل توضيحي للسؤال" class="section-image">`;
            }

            // إنشاء الأزرار للخيارات
            let optionsHTML = '';
            q.options.forEach((opt, optIndex) => {
                optionsHTML += `<div class="option-btn" onclick="checkAnswer(${index}, ${optIndex}, this)">${opt}</div>`;
            });

            card.innerHTML = `
                ${imageHTML}
                <div class="question-text">${q.question}</div>
                <div class="options-grid" id="options-${index}">
                    ${optionsHTML}
                </div>
                <button class="toggle-explain-btn" onclick="toggleExplanation('explain-${index}')">عرض/إخفاء التفسير</button>
                <div id="explain-${index}" class="explanation-box">
                    ${q.explanation}
                </div>
            `;
            container.appendChild(card);
        });
    }

    function checkAnswer(qIndex, selectedOptIndex, btnElement) {
        // منع الإجابة مرتين على نفس السؤال
        if (answeredQuestions.has(qIndex)) return;
        
        answeredQuestions.add(qIndex);
        const question = examData2024[qIndex];
        const parentGrid = document.getElementById(`options-${qIndex}`);
        const allOptions = parentGrid.querySelectorAll('.option-btn');

        if (selectedOptIndex === question.correct) {
            // إجابة صحيحة
            btnElement.classList.add('correct');
            currentScore++;
        } else {
            // إجابة خاطئة
            btnElement.classList.add('wrong');
            // إظهار الإجابة الصحيحة
            allOptions[question.correct].classList.add('correct');
        }
    }

    function toggleExplanation(id) {
        const el = document.getElementById(id);
        if (el.style.display === 'block') {
            el.style.display = 'none';
        } else {
            el.style.display = 'block';
        }
    }

    function calculateScore() {
        const modal = document.getElementById('scoreModal');
        const scoreDisplay = document.getElementById('finalScore');
        const message = document.getElementById('scoreMessage');
        const total = examData2024.length;

        scoreDisplay.innerText = `${currentScore} / ${total}`;
        
        const percentage = (currentScore / total) * 100;
        if (percentage >= 90) message.innerText = "ممتاز! مستوى رائع.";
        else if (percentage >= 75) message.innerText = "جيد جداً.";
        else if (percentage >= 50) message.innerText = "ناجح، ولكن تحتاج للمراجعة.";
        else message.innerText = "حاول مرة أخرى، ذاكر التفسيرات جيداً.";

        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('scoreModal').style.display = 'none';
    }

    function showExam(examId) {
        // إخفاء كل الأقسام
        document.querySelectorAll('.exam-section').forEach(sec => sec.classList.remove('active'));
        // إظهار القسم المطلوب
        document.getElementById(examId).classList.add('active');
        
        // إذا تم اختيار امتحان 2024، قم بتحميله (لإعادة التعيين إذا أردت)
        if(examId === 'exam2024') {
             // يمكنك هنا إعادة تصفير الامتحان لو رغبت
        }
    }

    // تشغيل الامتحان عند التحميل
    window.onload = initExam;
</script>

</body>
</html>
